"use strict";(()=>{var e={};e.id=437,e.ids=[437],e.modules={1335:(e,t,r)=>{r.r(t),r.d(t,{config:()=>P,default:()=>d,routeModule:()=>c});var s={};r.r(s),r.d(s,{default:()=>l});var o=r(3480),n=r(8667),a=r(6435);let i=process.env.KV_REST_API_URL,u=process.env.KV_REST_API_TOKEN;async function l(e,t){if("POST"!==e.method)return t.setHeader("Allow",["POST"]),t.status(405).end(`Method ${e.method} Not Allowed`);if(!i||!u)return console.error("[API /kv/set] Upstash URL or Token is missing from server environment variables!"),t.status(500).json({error:"Server configuration error"});let{key:r,value:s}=e.body;if(!r||void 0===s)return t.status(400).json({error:"Key and value are required"});try{console.log(`[API /kv/set] Setting key: ${r}`);let e=await fetch(`${i}/set/${r}`,{method:"POST",headers:{Authorization:`Bearer ${u}`},body:s});if(!e.ok){let s=await e.text();return console.error(`[API /kv/set] Upstash error setting key ${r}. Status: ${e.status}. Response: ${s}`),t.status(e.status).json({error:`Upstash error: ${s}`})}let o=await e.json();return console.log(`[API /kv/set] Successfully set key: ${r}. Upstash response:`,o),t.status(200).json(o)}catch(s){console.error(`[API /kv/set] Error setting key ${r}:`,s);let e=s instanceof Error?s.message:"Failed to set value in KV store";return t.status(500).json({error:e,details:String(s)})}}let d=(0,a.M)(s,"default"),P=(0,a.M)(s,"config"),c=new o.PagesAPIRouteModule({definition:{kind:n.A.PAGES_API,page:"/api/kv/set",pathname:"/api/kv/set",bundlePath:"",filename:""},userland:s})},3480:(e,t,r)=>{e.exports=r(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=1335);module.exports=r})();